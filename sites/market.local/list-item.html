<script>window.RelRoot = "../";</script>
<!doctype html><meta charset="utf-8"><title>Nebula Market - List Item</title>
<link rel="stylesheet" href="../static/skin.css">
<link rel="stylesheet" href="../static/components.css">
<script src="../static/common.js"></script>

<div class="navbar">
  <div class="inner">
    <div class="brand"><div class="logo"></div> Nebula Market</div>
    <div class="navlinks">
      <a href="index.html">Browse</a>
      <a href="list-item.html" class="active">Sell Item</a>
    </div>
  </div>
</div>
<div id="__toast" class="toast"></div>

<div class="container">
  <h1 style="margin-bottom: 24px">List Your Item for Sale</h1>
  
  <div class="card" style="max-width:600px; margin:0 auto;">
    <div class="mb-4">
      <label class="muted">Item Name</label>
      <input type="text" id="item-name" class="input mt-1" placeholder="e.g. Used Gaming Laptop">
    </div>
    <div class="mb-4">
      <label class="muted">Description</label>
      <textarea id="item-desc" class="input mt-1" rows="4" placeholder="Describe your item's condition, features, etc."></textarea>
    </div>
    <div class="mb-4">
      <label class="muted">Price ($)</label>
      <input type="number" id="item-price" class="input mt-1" placeholder="e.g. 250.00">
    </div>
    <div class="mb-4">
      <label class="muted">Category</label>
      <select id="item-category" class="input mt-1">
        <option value="electronics">Electronics</option>
        <option value="home">Home Goods</option>
        <option value="books">Books</option>
        <option value="sports">Sports</option>
        <option value="other">Other</option>
      </select>
    </div>
    <div class="mb-4">
      <label class="muted">Upload Photo (Optional)</label>
      <input type="file" id="item-photo" class="input mt-1">
    </div>
    
    <button class="btn pri" style="width:100%" onclick="submitListing()">List Item</button>
  </div>
</div>

<script>
async function submitListing() {
  const name = document.getElementById('item-name').value;
  const desc = document.getElementById('item-desc').value;
  const price = parseFloat(document.getElementById('item-price').value);
  const category = document.getElementById('item-category').value;
  const photo = document.getElementById('item-photo').files[0];
  
  if (!name || !desc || isNaN(price) || price <= 0) {
    Toast.error('Please fill in all required fields correctly.');
    return;
  }
  
  await send('B7-2025-GEN', 'list_second_hand_item', {
    name: name,
    description: desc,
    price: price,
    category: category,
    photo_name: photo ? photo.name : ''
  });
  
  Toast.success('Item listed successfully!');
  setTimeout(() => {
    window.location.href = 'index.html?listed=true';
  }, 1000);
}
</script>
