<!doctype html>
<html lang="zh-CN">
<head>
<script>window.RelRoot = "../";</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æˆ‘çš„è®¸å¯ - å¸‚æ”¿æœåŠ¡</title>
<link rel="stylesheet" href="../static/skin.css">
<link rel="stylesheet" href="../static/components.css">
<style>
.permit-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  margin-bottom: 24px;
}
.permit-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px dashed var(--border);
}
.permit-title {
  font-weight: 700;
  font-size: 20px;
  color: var(--text);
}
.permit-id {
  color: var(--muted);
  font-size: 14px;
}
.permit-status {
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
}
.permit-status.active { background: var(--ok-bg); color: var(--ok); }
.permit-status.expired { background: var(--err-bg); color: var(--err); }
.permit-details div {
  margin-bottom: 8px;
  font-size: 15px;
}
.permit-actions {
  display: flex;
  gap: 12px;
  margin-top: 20px;
}
</style>
</head>
<body>

<!-- Navigation -->
<div class="navbar">
  <div class="inner">
    <div class="brand">
      <div class="logo"></div>
      å¸‚æ”¿æœåŠ¡
    </div>
    <div class="navlinks">
      <a href="../gov.local/index.html">é¦–é¡µ</a>
      <a href="../gov.local/permits.html" class="active">æˆ‘çš„è®¸å¯</a>
      <a href="../gov.local/applications.html">æˆ‘çš„ç”³è¯·</a>
    </div>
  </div>
</div>

<div id="__toast" class="toast"></div>

<!-- Main Container -->
<div class="container">

  <h1 style="font-size:28px; font-weight:700; margin:24px 0">æˆ‘çš„è®¸å¯</h1>

  <!-- Permit List -->
  <div id="permit-list">
    <div class="permit-card">
      <div class="permit-header">
        <div>
          <div class="permit-title">åœè½¦è®¸å¯</div>
          <div class="permit-id">ID: RP-2024-77</div>
        </div>
        <div class="permit-status active">æœ‰æ•ˆ</div>
      </div>
      <div class="permit-details">
        <div>åˆ°æœŸæ—¥æœŸ: <span id="permit-expiry">2025-12-01</span></div>
        <div>ç­¾å‘æ—¥æœŸ: 2024-12-01</div>
        <div>åœ°å€: 123 Main St, Springfield</div>
      </div>
      <div class="permit-actions">
        <button class="btn pri" onclick="renewPermit('RP-2024-77')">ç»­æœŸ</button>
        <button class="btn">æŸ¥çœ‹è¯¦æƒ…</button>
      </div>
    </div>

    <div class="permit-card">
      <div class="permit-header">
        <div>
          <div class="permit-title">å»ºç­‘æ–½å·¥è®¸å¯</div>
          <div class="permit-id">ID: BC-2024-12</div>
        </div>
        <div class="permit-status expired">å·²è¿‡æœŸ</div>
      </div>
      <div class="permit-details">
        <div>åˆ°æœŸæ—¥æœŸ: 2025-06-15</div>
        <div>ç­¾å‘æ—¥æœŸ: 2024-06-15</div>
        <div>åœ°å€: 456 Elm St, Springfield</div>
      </div>
      <div class="permit-actions">
        <button class="btn pri" disabled>ç»­æœŸ</button>
        <button class="btn">æŸ¥çœ‹è¯¦æƒ…</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    å¸‚æ”¿æœåŠ¡ Â· Synthetic UI for Web Agent Research
  </div>

</div>

<!-- JavaScript -->
<script src="../static/common.js"></script>
<script src="../static/components.js"></script>
<script>
async function loadPermits() {
  try {
    const env = await loadEnv();
    const permit = env.permits?.["RP-2024-77"]; // Assuming this specific permit for the task
    if (permit && permit.next_appointment) { // Using next_appointment as proxy for expiry date
      document.getElementById('permit-expiry').textContent = permit.next_appointment.split('T')[0];
    }
  } catch (e) {
    console.error("Failed to load permit info:", e);
  }
}

function renewPermit(permitId) {
  window.location.href = `${window.RelRoot}gov.local/renew.html?permit_id=${permitId}`;
}

document.addEventListener('DOMContentLoaded', loadPermits);
</script>

<!-- Distractor: Chat Widget -->
<div class="chat-widget" onclick="Toast.info('Chat support busy. Please try later.')">
  <span style="font-size:24px">ğŸ’¬</span>
</div>

</body>
</html>
