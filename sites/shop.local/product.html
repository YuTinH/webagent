<!doctype html>
<html lang="zh-CN">
<head>
<script>window.RelRoot = "../";</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title id="page-title">å•†å“è¯¦æƒ… - Nebulaå•†åŸ</title>
<link rel="stylesheet" href="../static/skin.css">
<link rel="stylesheet" href="../static/components.css">
<style>
.product-main {
  display: grid;
  grid-template-columns: 480px 1fr;
  gap: 40px;
  margin-bottom: 40px;
}
.product-gallery {
  position: sticky;
  top: 80px;
  height: fit-content;
}
.main-image {
  width: 100%;
  height: 480px;
  background: linear-gradient(135deg, #1e293b, #334155);
  border-radius: var(--radius);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 120px;
  margin-bottom: 16px;
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
}
.main-image::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 30% 30%, rgba(99,102,241,0.2), transparent 70%);
}
.thumbnail-list {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}
.thumbnail {
  height: 100px;
  background: linear-gradient(135deg, #1e293b, #334155);
  border-radius: 12px;
  border: 2px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  cursor: pointer;
  transition: .2s;
}
.thumbnail:hover, .thumbnail.active {
  border-color: var(--pri);
  transform: scale(1.05);
}
.product-info-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}
.product-header h1 {
  font-size: 28px;
  font-weight: 700;
  margin: 0 0 12px 0;
  line-height: 1.3;
}
.product-subtitle {
  color: var(--muted);
  font-size: 16px;
  margin-bottom: 16px;
}
.product-meta {
  display: flex;
  gap: 24px;
  padding: 16px 0;
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
}
.meta-item {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--muted);
  font-size: 14px;
}
.price-section {
  background: radial-gradient(100% 140% at 0% 0%, rgba(99,102,241,.12), transparent 40%), var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
}
.price-label {
  color: var(--muted);
  font-size: 14px;
  margin-bottom: 8px;
}
.price-main {
  display: flex;
  align-items: baseline;
  gap: 16px;
  margin-bottom: 12px;
}
.current-price {
  font-size: 42px;
  font-weight: 800;
  color: #60a5fa;
}
.original-price {
  font-size: 20px;
  color: var(--muted);
  text-decoration: line-through;
}
.discount-badge {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  color: white;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 700;
}
.savings {
  color: #34d399;
  font-size: 15px;
}
.spec-section {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
}
.spec-title {
  font-weight: 600;
  margin-bottom: 16px;
  font-size: 16px;
}
.spec-options {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}
.spec-option {
  padding: 10px 20px;
  background: rgba(255,255,255,0.05);
  border: 1px solid var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: .2s;
  font-size: 14px;
}
.spec-option:hover {
  border-color: var(--pri);
  background: rgba(79,70,229,0.1);
}
.spec-option.active {
  background: linear-gradient(135deg, var(--pri), var(--pri-2));
  border-color: transparent;
  font-weight: 600;
}
.quantity-section {
  display: flex;
  align-items: center;
  gap: 16px;
}
.quantity-label {
  font-size: 15px;
  color: var(--muted);
}
.quantity-control {
  display: flex;
  align-items: center;
  gap: 4px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 4px;
}
.quantity-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: rgba(255,255,255,0.06);
  color: var(--text);
  border-radius: 8px;
  cursor: pointer;
  transition: .2s;
  font-size: 18px;
}
.quantity-btn:hover {
  background: rgba(255,255,255,0.12);
}
.quantity-input {
  width: 60px;
  text-align: center;
  background: transparent;
  border: none;
  color: var(--text);
  font-size: 16px;
  font-weight: 600;
}
.action-buttons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-top: 8px;
}
.action-buttons .btn {
  padding: 16px;
  font-size: 16px;
  font-weight: 600;
}
.features-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.features-list li {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: rgba(255,255,255,0.03);
  border-radius: 10px;
  font-size: 14px;
}
.features-list li::before {
  content: 'âœ“';
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: linear-gradient(135deg, #34d399, #10b981);
  border-radius: 50%;
  font-weight: 700;
  flex-shrink: 0;
}
.tabs {
  display: flex;
  gap: 4px;
  border-bottom: 2px solid var(--border);
  margin-bottom: 24px;
}
.tab {
  padding: 14px 28px;
  background: transparent;
  border: none;
  color: var(--muted);
  cursor: pointer;
  font-size: 16px;
  font-weight: 500;
  transition: .2s;
  position: relative;
}
.tab:hover {
  color: var(--text);
}
.tab.active {
  color: var(--pri);
}
.tab.active::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--pri), var(--pri-2));
}
.tab-content {
  display: none;
}
.tab-content.active {
  display: block;
}
.description-text {
  color: var(--muted);
  line-height: 1.8;
  font-size: 15px;
}
.specs-table {
  width: 100%;
}
.specs-table tr {
  border-bottom: 1px solid var(--border);
}
.specs-table td {
  padding: 16px 0;
  font-size: 14px;
}
.specs-table td:first-child {
  color: var(--muted);
  width: 180px;
}
.review-item {
  padding: 20px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin-bottom: 16px;
}
.review-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}
.reviewer-name {
  font-weight: 600;
}
.review-date {
  color: var(--muted);
  font-size: 13px;
}
.review-rating {
  color: #fbbf24;
  margin-bottom: 8px;
}
.review-text {
  color: var(--muted);
  line-height: 1.6;
  font-size: 14px;
}
.loading {
  text-align: center;
  padding: 40px;
  color: var(--muted);
}
</style>
</head>
<body>

<!-- Navigation -->
<div class="navbar">
  <div class="inner">
    <div class="brand">
      <div class="logo"></div>
      Nebulaå•†åŸ
    </div>
    <div class="navlinks">
      <a href="../shop.local/index.html">é¦–é¡µ</a>
      <a href="../shop.local/orders.html">è®¢å•</a>
      <a href="../pay.local/wallet/cards.html">é’±åŒ…</a>
    </div>
    <div class="search">
      <input id="quick-search" type="search" placeholder="æœç´¢å•†å“..." onkeypress="if(event.key==='Enter') window.location.href='../shop.local/search.html?q='+encodeURIComponent(this.value)">
    </div>
    <div style="display:flex; gap:16px; margin-left:16px">
      <button class="wishlist-icon-btn" onclick="toggleWishlistCurrentProduct()">
        â¤ï¸
        <span id="wishlist-count" class="cart-count" style="display:none">0</span>
      </button>
      <button class="cart-icon-btn" onclick="openCartDrawer()">
        ğŸ›’
        <span id="cart-count" class="cart-count" style="display:none">0</span>
      </button>
      <button id="user-menu-btn">ğŸ‘¤</button>
    </div>
  </div>
</div>

<div id="__toast" class="toast"></div>

<!-- Main Container -->
<div class="container">

  <!-- Breadcrumbs -->
  <div class="breadcrumbs" style="margin:20px 0">
    <a href="../shop.local/index.html">é¦–é¡µ</a> / <span id="breadcrumb-category">å•†å“</span> / <span id="breadcrumb-name">è¯¦æƒ…</span>
  </div>

  <!-- Product Main Section -->
  <div id="product-container" class="loading">æ­£åœ¨åŠ è½½å•†å“ä¿¡æ¯...</div>

  <!-- Tabs Section -->
  <div id="tabs-section" style="display:none">
    <div class="tabs">
      <button class="tab active" onclick="switchTab(0)">å•†å“è¯¦æƒ…</button>
      <button class="tab" onclick="switchTab(1)">è§„æ ¼å‚æ•°</button>
      <button class="tab" onclick="switchTab(2)">ç”¨æˆ·è¯„ä»·</button>
    </div>

    <div class="tab-content active" id="tab-0">
      <div class="card">
        <div class="description-text" id="description-content">
          <p>ä¼˜è´¨å•†å“ï¼Œç²¾å¿ƒæŒ‘é€‰ï¼Œå“è´¨ä¿è¯ã€‚</p>
          <p>ä¸ºæ‚¨å¸¦æ¥å“è¶Šçš„ä½¿ç”¨ä½“éªŒï¼Œè®©ç”Ÿæ´»æ›´ç¾å¥½ã€‚</p>
        </div>
      </div>
    </div>

    <div class="tab-content" id="tab-1">
      <div class="card">
        <table class="specs-table" id="specs-table">
          <tr><td>å“ç‰Œ</td><td>Nebula</td></tr>
          <tr><td>å‹å·</td><td>-</td></tr>
          <tr><td>äº§åœ°</td><td>ä¸­å›½</td></tr>
        </table>
      </div>
    </div>

    <div class="tab-content" id="tab-2">
      <div id="reviews-container">
        <div class="review-item">
          <div class="review-header">
            <div class="reviewer-name">Masteryth</div>
            <div class="review-date">2025-11-10</div>
          </div>
          <div class="review-rating">â­â­â­â­â­</div>
          <div class="review-text">å•†å“è´¨é‡å¾ˆå¥½ï¼Œç‰©æµä¹Ÿå¾ˆå¿«ï¼Œéå¸¸æ»¡æ„ï¼</div>
        </div>
        <div class="review-item">
          <div class="review-header">
            <div class="reviewer-name">æ***</div>
            <div class="review-date">2025-11-08</div>
          </div>
          <div class="review-rating">â­â­â­â­â­</div>
          <div class="review-text">æ€§ä»·æ¯”å¾ˆé«˜ï¼Œæ¨èè´­ä¹°ï¼</div>
        </div>
        <div class="review-item">
          <div class="review-header">
            <div class="reviewer-name">ç‹***</div>
            <div class="review-date">2025-11-05</div>
          </div>
          <div class="review-rating">â­â­â­â­</div>
          <div class="review-text">ä¸é”™ï¼Œç¬¦åˆé¢„æœŸã€‚</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    Nebulaå•†åŸ Â· Synthetic UI for Web Agent Research
  </div>

</div>

<!-- JavaScript -->
<script src="../static/common.js"></script>
<script src="../static/components.js"></script>
<script>
// State
let product = null;
let quantity = 1;
let cart = JSON.parse(localStorage.getItem('cart') || '[]');
let wishlist = JSON.parse(localStorage.getItem('wishlist') || '[]');
let userMenuDropdown = null;

// Initialize components on load
window.addEventListener('DOMContentLoaded', () => {
  // User menu dropdown
  userMenuDropdown = new Dropdown(document.getElementById('user-menu-btn'), {
    align: 'right',
    items: [
      { icon: 'ğŸ‘¤', label: 'æˆ‘çš„è´¦æˆ·', value: 'account' },
      { icon: 'ğŸ“¦', label: 'æˆ‘çš„è®¢å•', value: 'orders' },
      { icon: 'â¤ï¸', label: 'æˆ‘çš„æ”¶è—', value: 'wishlist' },
      { type: 'divider' },
      { icon: 'âš™ï¸', label: 'è®¾ç½®', value: 'settings' },
      { icon: 'ğŸšª', label: 'é€€å‡ºç™»å½•', value: 'logout' }
    ],
    onSelect: (item) => {
      if (item.value === 'orders') window.location.href='../shop.local/orders.html';
      else if (item.value === 'wishlist') openWishlist();
      else if (item.value === 'account') Toast.info('ä¸ªäººä¸­å¿ƒåŠŸèƒ½å¼€å‘ä¸­');
      else if (item.value === 'settings') Toast.info('è®¾ç½®åŠŸèƒ½å¼€å‘ä¸­');
      else if (item.value === 'logout') Toast.info('å·²é€€å‡ºç™»å½•');
    }
  });
});

// Get product identifier (numeric id or SKU) from URL
function getProductId() {
  const params = new URLSearchParams(window.location.search);
  const idParam = params.get('id');
  if (idParam) return idParam;
  const parts = window.location.pathname.split('/').filter(Boolean);
  if (parts.length >= 3 && parts[1] === 'product') {
    return parts[2];
  }
  return null;
}

// Update cart count
function updateCartCount() {
  const count = cart.reduce((sum, item) => sum + item.quantity, 0);
  const badge = document.getElementById('cart-count');
  if (count > 0) {
    badge.textContent = count;
    badge.style.display = 'block';
  } else {
    badge.style.display = 'none';
  }
}

// Update wishlist count
function updateWishlistCount() {
  const badge = document.getElementById('wishlist-count');
  if (wishlist.length > 0) {
    badge.textContent = wishlist.length;
    badge.style.display = 'block';
  } else {
    badge.style.display = 'none';
  }
}

// Open cart drawer
function openCartDrawer() {
  const drawer = new CartDrawer();
  drawer.open();
}

// Toggle wishlist for current product
function toggleWishlistCurrentProduct() {
  if (!product) {
    Toast.warning('è¯·å…ˆé€‰æ‹©å•†å“');
    return;
  }

  const index = wishlist.findIndex(item => item.product_id === product.product_id);
  if (index >= 0) {
    wishlist.splice(index, 1);
    Toast.info('å·²ä»æ”¶è—å¤¹ç§»é™¤');
  } else {
    wishlist.push({
      product_id: product.product_id,
      sku: product.sku,
      name: product.name,
      price: product.price,
      category: product.category
    });
    Toast.success('å·²åŠ å…¥æ”¶è—å¤¹ â¤ï¸');
  }

  localStorage.setItem('wishlist', JSON.stringify(wishlist));
  updateWishlistCount();
}

// Open wishlist modal
function openWishlist() {
  if (wishlist.length === 0) {
    Toast.info('æ”¶è—å¤¹æ˜¯ç©ºçš„');
    return;
  }

  const content = `
    <div style="max-height:400px; overflow-y:auto">
      ${wishlist.map(item => `
        <div style="display:flex; gap:12px; padding:12px; border-bottom:1px solid var(--border)">
          <div style="font-size:32px">${getCategoryIcon(item.category)}</div>
          <div style="flex:1">
            <div style="font-weight:600">${escapeHtml(item.name)}</div>
            <div style="color:var(--pri); font-weight:700; margin-top:4px">Â¥${item.price.toFixed(2)}</div>
          </div>
          <button class="btn sm" onclick="removeFromWishlist('${item.product_id}')">ç§»é™¤</button>
        </div>
      `).join('')}
    </div>
  `;

  new Modal({
    title: 'æˆ‘çš„æ”¶è—',
    content: content,
    showCancel: false,
    confirmText: 'å…³é—­'
  }).open();
}

// Remove from wishlist
function removeFromWishlist(productId) {
  wishlist = wishlist.filter(item => item.product_id !== productId);
  localStorage.setItem('wishlist', JSON.stringify(wishlist));
  updateWishlistCount();
  openWishlist(); // Refresh the modal
}

// Load product
async function loadProduct() {
  const productId = getProductId();
  if (!productId) {
    window.location.href='../shop.local/index.html';
    return;
  }

  try {
    const response = await fetch(`/api/products/${productId}`);
    const data = await response.json();

    if (data.success) {
      product = data.product;
      renderProduct();
      document.getElementById('tabs-section').style.display = 'block';
    } else {
      showError('å•†å“ä¸å­˜åœ¨');
    }
  } catch (error) {
    console.error('Failed to load product:', error);
    showError('åŠ è½½å¤±è´¥');
  }
}

// Render product
function renderProduct() {
  const container = document.getElementById('product-container');
  const icon = getCategoryIcon(product.category);
  const hasStock = product.stock > 0;
  const discount = product.original_price ? Math.round((1 - product.price / product.original_price) * 100) : 0;
  const savings = product.original_price ? (product.original_price - product.price).toFixed(2) : 0;

  // Update page title and breadcrumbs
  document.getElementById('page-title').textContent = `${product.name} - Nebulaå•†åŸ`;
  document.getElementById('breadcrumb-category').textContent = getCategoryName(product.category);
  document.getElementById('breadcrumb-name').textContent = product.name;

  container.innerHTML = `
    <div class="product-main">
      <!-- Gallery -->
      <div class="product-gallery">
        <div class="main-image">
          <div style="font-size:120px; position:relative; z-index:1">${icon}</div>
        </div>
        <div class="thumbnail-list">
          <div class="thumbnail active">${icon}</div>
          <div class="thumbnail">${icon}</div>
          <div class="thumbnail">${icon}</div>
          <div class="thumbnail">${icon}</div>
        </div>
      </div>

      <!-- Info -->
      <div class="product-info-section">
        <div class="product-header">
          <h1>${escapeHtml(product.name)}</h1>
          <div class="product-subtitle">${escapeHtml(product.description || 'ä¼˜è´¨å•†å“ï¼Œå€¼å¾—ä¿¡èµ–')}</div>
          <div class="product-meta">
            <div class="meta-item">
              <span>â­</span>
              <span>4.8åˆ†</span>
            </div>
            <div class="meta-item">
              <span>ğŸ“¦</span>
              <span>${Math.floor(Math.random() * 1000 + 500)} å·²å”®</span>
            </div>
            <div class="meta-item">
              <span>ğŸ’¬</span>
              <span>${Math.floor(Math.random() * 500 + 100)} è¯„ä»·</span>
            </div>
          </div>
        </div>

        <!-- Price -->
        <div class="price-section">
          <div class="price-label">ä¿ƒé”€ä»·</div>
          <div class="price-main">
            <span class="current-price price-current">Â¥${product.price.toFixed(2)}</span>
            ${product.original_price ? `
              <span class="original-price">Â¥${product.original_price.toFixed(2)}</span>
              <span class="discount-badge">${discount}% OFF</span>
            ` : ''}
          </div>
          ${savings > 0 ? `<div class="savings">æ‚¨èŠ‚çœäº† Â¥${savings}</div>` : ''}
          <ul class="features-list" style="margin-top:16px">
            <li>âœ“ æ­£å“ä¿è¯</li>
            <li>âœ“ å¿«é€Ÿé…é€</li>
            <li>âœ“ ä¸ƒå¤©æ— ç†ç”±é€€æ¢</li>
          </ul>
        </div>

        <!-- Stock Status -->
        <div class="spec-section">
          <div class="spec-title">åº“å­˜çŠ¶æ€</div>
          ${hasStock ? `
            <div style="display:flex; align-items:center; gap:12px">
              <span class="badge ok">æœ‰è´§</span>
              <span class="muted" style="font-size:14px">ä»…å‰© ${product.stock} ä»¶</span>
            </div>
          ` : `
            <span class="badge err">æš‚æ—¶ç¼ºè´§</span>
          `}
        </div>

        <!-- Shipping options -->
        <div class="spec-section">
          <div class="spec-title">é…é€æ–¹å¼</div>
          <div style="display:flex; gap:12px; flex-wrap:wrap">
            <label class="kv" style="cursor:pointer; gap:8px">
              <input type="radio" name="shipping" id="shipping-option-same-day" checked>
              <span>å½“æ—¥è¾¾</span>
            </label>
            <label class="kv" style="cursor:pointer; gap:8px">
              <input type="radio" name="shipping" id="shipping-option-standard">
              <span>æ ‡å‡†é…é€</span>
            </label>
          </div>
        </div>

        <!-- Quantity -->
        ${hasStock ? `
        <div class="spec-section">
          <div class="quantity-section">
            <div class="quantity-label">æ•°é‡</div>
            <div class="quantity-control">
              <button class="quantity-btn" onclick="changeQuantity(-1)">-</button>
              <input type="number" class="quantity-input" id="quantity-input" value="1" min="1" max="${product.stock}" onchange="updateQuantity(this.value)">
              <button class="quantity-btn" onclick="changeQuantity(1)">+</button>
            </div>
            <div class="muted" style="font-size:13px">æœ€å¤šå¯è´­ä¹° ${product.stock} ä»¶</div>
          </div>
        </div>
        ` : ''}

        <!-- Action Buttons -->
        <div class="action-buttons">
          ${hasStock ? `
            <button class="btn ok" id="add-to-cart-btn" onclick="addToCart()" style="font-size:16px">ğŸ›’ åŠ å…¥è´­ç‰©è½¦</button>
            <button class="btn pri" id="buy-now-btn" onclick="buyNow()" style="font-size:16px">âš¡ ç«‹å³è´­ä¹°</button>
          ` : `
            <button class="btn" disabled style="font-size:16px">æš‚æ—¶ç¼ºè´§</button>
            <button class="btn" onclick="notifyWhenAvailable()" style="font-size:16px">ğŸ”” åˆ°è´§é€šçŸ¥</button>
          `}
        </div>
      </div>
    </div>
  `;
}

// Change quantity
function changeQuantity(delta) {
  quantity = Math.max(1, Math.min(product.stock, quantity + delta));
  document.getElementById('quantity-input').value = quantity;
}

// Update quantity
function updateQuantity(value) {
  quantity = Math.max(1, Math.min(product.stock, parseInt(value) || 1));
  document.getElementById('quantity-input').value = quantity;
}

// Add to cart
function addToCart() {
  const existingItem = cart.find(item => item.product_id === product.product_id);

  if (existingItem) {
    existingItem.quantity += quantity;
  } else {
    cart.push({
      product_id: product.product_id,
      sku: product.sku,
      name: product.name,
      price: product.price,
      category: product.category,
      quantity: quantity
    });
  }

  localStorage.setItem('cart', JSON.stringify(cart));
  updateCartCount();

  Toast.success(`å·²æ·»åŠ  ${quantity} ä»¶å•†å“åˆ°è´­ç‰©è½¦`);

  // Open cart drawer instead of navigating
  setTimeout(() => openCartDrawer(), 300);
}

// Buy now
function buyNow() {
  addToCart();
  window.location.href='../shop.local/cart.html';
}

// Notify when available
function notifyWhenAvailable() {
  new Modal({
    title: 'åˆ°è´§é€šçŸ¥',
    content: `
      <p style="margin-bottom:16px">å•†å“åˆ°è´§åæˆ‘ä»¬ä¼šç¬¬ä¸€æ—¶é—´é€šçŸ¥æ‚¨</p>
      <input type="email" placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€" class="input" style="width:100%; margin-bottom:8px">
      <input type="tel" placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç " class="input" style="width:100%">
    `,
    confirmText: 'æäº¤',
    onConfirm: () => {
      Toast.success('æäº¤æˆåŠŸï¼åˆ°è´§åä¼šé€šçŸ¥æ‚¨');
    }
  }).open();
}

// Switch tab
function switchTab(index) {
  document.querySelectorAll('.tab').forEach((tab, i) => {
    tab.classList.toggle('active', i === index);
  });
  document.querySelectorAll('.tab-content').forEach((content, i) => {
    content.classList.toggle('active', i === index);
  });
}

// Show error
function showError(message) {
  const container = document.getElementById('product-container');
  container.innerHTML = `
    <div style="text-align:center; padding:80px 20px">
      <div style="font-size:64px; margin-bottom:20px; opacity:0.5">âŒ</div>
      <div style="font-size:20px; color:var(--muted)">${message}</div>
      <a href="../shop.local/index.html" class="btn pri" style="margin-top:24px; display:inline-block">è¿”å›é¦–é¡µ</a>
    </div>
  `;
}

// Show toast
function showToast(message) {
  Toast.info(message);
}

// Get category icon
function getCategoryIcon(category) {
  const icons = {
    'electronics': 'ğŸ–±ï¸',
    'home': 'ğŸ ',
    'books': 'ğŸ“š',
    'sports': 'âš½',
    'fashion': 'ğŸ‘•',
    'toys': 'ğŸ§¸',
    'food': 'ğŸœ'
  };
  return icons[category] || 'ğŸ“¦';
}

// Get category name
function getCategoryName(category) {
  const names = {
    'electronics': 'ç”µå­äº§å“',
    'home': 'å®¶å±…ç”¨å“',
    'books': 'å›¾ä¹¦',
    'sports': 'è¿åŠ¨æˆ·å¤–',
    'fashion': 'æœè£…é…é¥°',
    'toys': 'ç©å…·',
    'food': 'é£Ÿå“'
  };
  return names[category] || 'å•†å“';
}

// Escape HTML
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

// Initialize
updateCartCount();
updateWishlistCount();
loadProduct();
</script>


<!-- Distractor: Chat Widget -->
<div class="chat-widget" onclick="Toast.info('Chat support busy. Please try later.')">
  <span style="font-size:24px">ğŸ’¬</span>
</div>

</body>
</html>
