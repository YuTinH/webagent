<!doctype html>
<html lang="zh-CN">
<head>
<script>window.RelRoot = "../";</script>
  <meta charset="utf-8">
  <title>Reset Password - Security</title>
  <link rel="stylesheet" href="../static/skin.css">
  <link rel="stylesheet" href="../static/components.css">
  <script src="../static/common.js"></script>
  <script src="../static/components.js"></script>
</head>
<body class="page" style="display:flex; align-items:center; justify-content:center; min-height:100vh">
  
  <div class="card soft" style="width:400px">
    <h1 style="text-align:center">重置密码</h1>
    
    <div class="form">
        <label>验证码</label>
        <input id="code" class="input" placeholder="输入短信验证码">
        
        <label>新密码</label>
        <input id="new-password" type="password" class="input" placeholder="输入新密码">
        
        <button class="btn pri" style="width:100%; margin-top:24px" onclick="doReset()">重置密码</button>
    </div>
  </div>

  <script>
  async function doReset() {
      const code = document.getElementById('code').value;
      const newPass = document.getElementById('new-password').value;
      
      if (!code || !newPass) {
          Toast.error("请填写完整");
          return;
      }
      
      const resp = await send('Z5-2025-RESET', 'reset_password', {
          code: code,
          new_password: newPass
      });
      
      if (resp && resp.redirect) {
          window.location.href = resp.redirect;
      } else if (resp && resp.error) {
          Toast.error(resp.error);
      }
  }
  </script>
</body>
</html>
