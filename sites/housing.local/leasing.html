<!doctype html>
<html lang="zh-CN">
<head>
<script>window.RelRoot = "../";</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æˆ‘çš„ç§Ÿèµ - æ™ºæ…§å±…ä½</title>
<link rel="stylesheet" href="../static/skin.css">
<link rel="stylesheet" href="../static/components.css">
<style>
.leasing-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  margin-bottom: 24px;
}
.leasing-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px dashed var(--border);
}
.leasing-title {
  font-weight: 700;
  font-size: 20px;
  color: var(--text);
}
.leasing-status {
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
}
.leasing-status.signed { background: var(--ok-bg); color: var(--ok); }
.leasing-status.pending { background: var(--warn-bg); color: var(--warn); }
.leasing-details div {
  margin-bottom: 8px;
  font-size: 15px;
}
.empty-state {
  text-align: center;
  padding: 80px 20px;
  color: var(--muted);
}
.empty-state-icon {
  font-size: 64px;
  margin-bottom: 16px;
  opacity: 0.5;
}
</style>
</head>
<body>

<!-- Navigation -->
<div class="navbar">
  <div class="inner">
    <div class="brand">
      <div class="logo"></div>
      æ™ºæ…§å±…ä½
    </div>
    <div class="navlinks">
      <a href="../housing.local/index.html">é¦–é¡µ</a>
      <a href="../housing.local/applications.html">æˆ‘çš„ç”³è¯·</a>
      <a href="../housing.local/leasing.html" class="active">æˆ‘çš„ç§Ÿèµ</a>
    </div>
  </div>
</div>

<div id="__toast" class="toast"></div>

<!-- Main Container -->
<div class="container">

  <h1 style="font-size:28px; font-weight:700; margin:24px 0">æˆ‘çš„ç§Ÿèµ</h1>

  <div id="leasing-list">
    <div class="empty-state">
      <div class="empty-state-icon">ğŸ¡</div>
      <div>æ­£åœ¨åŠ è½½ç§Ÿèµä¿¡æ¯...</div>
    </div>
  </div>

  <div class="footer">
    æ™ºæ…§å±…ä½ Â· Synthetic UI for Web Agent Research
  </div>

</div>

<!-- JavaScript -->
<script src="../static/common.js"></script>
<script src="../static/components.js"></script>
<script>
async function loadLeasingInfo() {
  const listContainer = document.getElementById('leasing-list');
  listContainer.innerHTML = `
    <div class="empty-state">
      <div class="empty-state-icon">ğŸ¡</div>
      <div>æ­£åœ¨åŠ è½½ç§Ÿèµä¿¡æ¯...</div>
    </div>
  `;

  try {
    const env = await loadEnv();
    const leases = env.housing?.leases || {};

    let content = '';
    for (const propId in leases) {
      const lease = leases[propId];
      if (lease.status === 'signed') {
        content += `
          <div class="leasing-card">
            <div class="leasing-header">
              <div class="leasing-title">ç§Ÿèµæˆ¿æº: ${propId}</div>
              <div class="leasing-status signed">å·²ç­¾çº¦</div>
            </div>
            <div class="leasing-details">
              <div>åœ°å€: 123 Main St, Springfield</div>
              <div>ç§ŸæœŸ: ${lease.term}</div>
              <div>ç­¾çº¦æ—¥æœŸ: ${lease.signed_date || 'N/A'}</div>
            </div>
          </div>
        `;
      }
    }

    if (content) {
      listContainer.innerHTML = content;
    } else {
      listContainer.innerHTML = `
        <div class="empty-state">
          <div class="empty-state-icon">ğŸ¡</div>
          <div>æš‚æ— å·²ç­¾çº¦ç§Ÿèµ</div>
          <a href="${window.RelRoot}housing.local/index.html" class="btn pri" style="margin-top:20px">æµè§ˆæˆ¿æº</a>
        </div>
      `;
    }
  } catch (e) {
    console.error('åŠ è½½ç§Ÿèµä¿¡æ¯å¤±è´¥:', e);
    listContainer.innerHTML = `
      <div class="empty-state">
        <div class="empty-state-icon">âŒ</div>
        <div>åŠ è½½ç§Ÿèµä¿¡æ¯å¤±è´¥ï¼Œè¯·ç¨åå†è¯•</div>
      </div>
    `;
  }
}

document.addEventListener('DOMContentLoaded', loadLeasingInfo);
</script>

<!-- Distractor: Chat Widget -->
<div class="chat-widget" onclick="Toast.info('Chat support busy. Please try later.')">
  <span style="font-size:24px">ğŸ’¬</span>
</div>

</body>
</html>
