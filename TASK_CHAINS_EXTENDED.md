# Web Agent Dynamic Suite V2 - 扩展任务链剧本

本文档详细定义了基于现有 60+ 原子任务构建的 **8 条全新长程任务链**。这些剧本旨在测试 Agent 在特定领域（如健康、安全、行政）内的深度逻辑推理和状态维护能力。

---

## 1. 🎓 勤奋学生链 (The Diligent Student)
**场景**: 模拟一名大学生在新学期的学习与生活安排。
*   **核心考察**: 学术资源获取与社交财务管理。

1.  **A4 (Mobile Plan)**: 办理校园手机套餐，确保有网。
2.  **J1 (Course Enroll)**: 登录教务系统，抢选热门课程（如 DL101）。
3.  **F1 (Calendar)**: 将课程表导入日历，检查是否有时间冲突。
4.  **J2 (Library)**: 办理图书馆借阅卡，并预约课程参考书。
5.  **B1 (Shopping)**: 购买学习用品（笔记本、笔）。
6.  **K2 (Roommate Split)**: 月末与室友分摊网费和生活杂费。

---

## 2. 🏥 健康管理闭环 (The Health Guardian)
**场景**: 从日常保健到突发疾病应对的全流程。
*   **核心考察**: 预防性规划与危机后的补救措施。

1.  **G5 (Health Plan)**: 在健康 App 上制定“减脂计划”。
2.  **B2 (Fresh Sub)**: 根据健康计划，订阅每周的有机蔬菜配送。
3.  **G6 (Vaccine)**: 预约流感疫苗接种。
4.  **M3 (Illness)**: **[突发事件]** 突然生病发烧，上报健康状态（触发体力下降）。
5.  **G1 (Doctor Appt)**: 预约医生进行远程或线下问诊。
6.  **G4 (Pharmacy)**: 根据处方购买药物。
7.  **G3 (Medical Claim)**: 康复后，上传发票进行商业保险理赔。

---

## 3. 🛡️ 隐私安全保卫战 (The Security Hardening)
**场景**: 用户意识到账号存在风险，进行系统性的安全升级。
*   **核心考察**: 对安全事件的响应速度和复杂验证流程的处理。

1.  **L3 (Security Audit)**: 检查登录日志，发现有异地登录痕迹。
2.  **Z5 (Password Recovery)**: 立即执行忘记密码流程，通过手机验证码重置密码。
3.  **L1 (Password Mgr)**: 将新密码更新到密码管理器中，并删除旧的不安全密码。
4.  **L4 (2FA Device)**: 更换/添加新的 2FA 认证设备。
5.  **L2 (Data Deletion)**: 向可疑的第三方应用发送“数据删除请求 (DSR)”。

---

## 4. 🏠 智能家居发烧友 (The Smart Home Enthusiast)
**场景**: 打造一个自动化、节能的居住环境。
*   **核心考察**: 设备管理与数据驱动的决策。

1.  **A3 (Utility Setup)**: 确保基础电力服务已开通。
2.  **B1 (Shopping)**: 购买智能灯泡和智能插座。
3.  **I3 (Smart Setup)**: 收到货后，进行设备配网和房间绑定。
4.  **I4 (Smart Meter)**: 运行一段时间后，检查智能电表的读数。
5.  **I5 (Energy Opt)**: 发现电费过高，根据读数切换到“峰谷电价”套餐。

---

## 5. 🛒 购物狂的后悔药 (The Regretful Shopper)
**场景**: 复杂的电商售后博弈。
*   **核心考察**: 权益维护与逆向物流处理。

1.  **B1 (Shopping)**: 购买高价电子产品。
2.  **Z1 (Order Arrival)**: **[时间跳跃]** 等待收货。
3.  **B6 (Price Protect)**: 发现商品降价了，申请价格保护退差价。
4.  **C5 (Review)**: 使用后发现体验一般，撰写中评。
5.  **C2 (Return)**: 最终决定退货。
6.  **C1 (Logistics)**: 如果退货物流卡住了，联系客服催促。

---

## 6. 🚗 车主与市政 (The Car Owner)
**场景**: 搬家后的一系列行政变更，涉及人、车、证。
*   **核心考察**: 政府服务流程的依从性与多证件联动。

1.  **H1 (Address Change)**: 在市政系统更新居住地址。
2.  **H2 (Vehicle Reg)**: 更新车辆行驶证的注册地址（通常需在 H1 之后）。
3.  **G2 (Insurance)**: 通知车险公司更新地址（可能影响保费，体现蝴蝶效应）。
4.  **H4 (Parking Permit)**: 申请新住处的路边停车证（依赖 H2 的车辆信息）。
5.  **D1 (Bill Agg)**: 将停车费账单添加到自动缴费列表。

---

## 7. 💼 自由职业者的一天 (The Freelancer)
**场景**: 在家办公 (SOHO) 的行政与财务管理。
*   **核心考察**: 文档处理与税务合规。

1.  **F3 (Submission)**: 向期刊/客户提交工作成果（论文或设计稿）。
2.  **F5 (Receipts)**: 整理工作相关的消费小票，上传云盘归档。
3.  **D5 (Tax Prep)**: 到了报税季，从云盘提取凭证，填写税务申报表。
4.  **D1 (Check Balance)**: 确认客户回款是否到账。
5.  **D3 (Autopay)**: 设定用这笔收入自动支付房租。

---

## 8. 🎉 派对组织者 (The Party Planner)
**场景**: 组织一次社区聚会。
*   **核心考察**: 资源统筹与多方协调。

1.  **K1 (Join Group)**: 加入社区群组，发布活动通知。
2.  **B1 (Shopping)**: 购买装饰品和餐具。
3.  **B4 (Food Delivery)**: 预订派对当天的披萨和饮料。
4.  **J3 (Tickets)**: 如果是收费活动，管理票务销售。
5.  **K2 (Split Bill)**: 活动结束后，与核心组织者分摊未覆盖的成本。
6.  **K3 (Charity)**: 将活动结余的资金捐赠给社区慈善机构。

---

## 💡 使用建议

*   **状态依赖**: 大多数链条都隐含着 `State Dependency`。例如，必须先在 **B1** 买到东西，才能在 **C2** 退货。
*   **时间跳跃**: 在任何涉及“等待”的环节（如物流、审批、生病恢复），建议插入 `/api/debug/time_travel` 操作，以模拟真实的时间跨度。
*   **混合评测**: 建议使用 `chain_runner.py` 按顺序执行这些剧本，并结合 **剧情分 (Scenario Score)** 来评估 Agent 是否做出了符合上下文的最优决策。
